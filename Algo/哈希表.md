虽然是O(1), 但是常数时间比较大.



## 布隆过滤器

### 需求

100亿个字符串文件(url  每个64字节), 黑名单系统, 给定一个URL, 是否属于这个黑名单.



### bloom filter

场景: 大样本量黑名单系统, 审查, 爬虫去重复

好处: 省内存空间 (30G内)

坏处: 存在失误率, 通过设计可以压低(10万之1以下): 宁可错杀3000 不放过一个的错误类型. 



如果单纯**hashtable**, 6400亿, 640G内存, 忒大了

10亿byte, 约为1G



整型数组的操作, 换算成bit数组的操作.

布隆过滤器 长度 m bit

初始 全是0, 白状态

一个url 通过hash function得到hashcode 得到0 - m-1

hashF1, hashF2, hashF3

经历k个hashF, 一个url描黑k个位置, 有可能重复.



下个url同样, k个hashF. 



相当于指纹库, 采集k个特征点



N个样本,单样本大小S字节, k个hash函数, m个bit

问题: m取多大.

失误率和m成反比. 取决于你想要什么失误率 和 当前样本量

### Formular

$$ m = \frac{N * lnP}{(ln2)^2}$$

N:样本量

