可靠、按序的交付服务（TCP）

* 拥塞控制
* 流量控制
* 连接建立



不可靠的交付服务（UDP）

* 基于“尽力而为”的网络层，没有做（可靠性方面的）拓展

两种服务均不保证

* 延迟
* 带宽



## 多路复用 和 多路分用

### why

如果某层的一个协议对应直接上层的多个协议/实体，则需要复用/分用



#### 接收端进行多路分用：

**传输层**依据头部信息将收到的segment交给正确的socket，即**不同**的进程



#### 发送端进行多路复用：

从多个Socket接收数据，为每块数据封装上头部信息，生成Segment，交给网络层



### 分用如何工作：

主机接收到IP数据报（datagram）

* 每个数据报携带源IP地址、目的IP地址
* 每个数据报携带一个传输层的段（Segment）
* 每个段携带源端口号和目的端口号

主机收到Segment之后，传输层协议提取IP地址和端口号信息，将Segment导向相应的Socket

* TCP做更多处理



## UDP：User Datagram Protocol

RFC 768

基于Internet IP协议

* 复用/分用
* 简单的错误校验

Best effort 服务，UDP段可能

* 丢失
* 非按序到达

IP就是这样，UDP并没有加其他功能

无连接：

* UDP发送方和接收方之间**不需要握手**
* 每个UDP段的处理独立于其他段



#### UDP为什么存在？

* 无需建立连接（减少延迟）
* 实现简单：无需维护连接状态
* 头部开销少 8字节 （tcp20字节）
* 没有**拥塞控制**：应用可更好地控制发送时间和速率

