Part 2

**Making your tests work for you**

在第四章中，你将学到组成一个好的单元测试的四大支柱。
这四个支柱奠定了一个基础，一个共同的参考框架，我们将用它来分析单元测试和测试方法的前进。

第五章以第四章建立的参考框架为基础，建立了模拟的案例及其与测试脆弱性的关系。

第六章使用同样的参考框架来研究单元测试的三种风格。它显示了这些风格中哪一种倾向于产生质量最好的测试，以及为什么。

第七章将第四章到第六章的知识付诸实践，并教你如何从臃肿、过于复杂的测试中重构出能以尽可能少的维护成本提供尽可能多的价值的测试。



## 第四章 好单元测试的四个基石

本章内容：

* 探讨好单元测试各方面的二分法
* 定义一个理想的测试
* 理解测试三角形
* 使用黑盒测试和白盒测试

现在我们要进入问题的核心。在第一章中，你看到一个好的单元测试的几个性质：

* ***它被整合到开发周期中***。你只有从你积极使用的单元测试中获得价值，否则编写测试就没有意义
* ***它只针对你的代码库中最重要的部分***。并非所有的生产代码都值得同等重视。将应用程序的核心（它的领域模型）与其他一切区分开来是很重要的。这个问题将在第七章讨论。
* ***它以最低的维护成本提供最大的价值***。为了实现最后一个属性，你需要能够做到以下几点：
  * 识别有价值的测试（进而识别低价值的测试）
  * 写一个有价值的测试

正如我们在第一章中所讨论的那样，认识有价值的测试和编写有价值的测试是两种不同的技能。



系好安全带，我们要出发了。

### 4.1 深入研究好单元测试的四大支柱

一个好的单元测试有如下四个属性：

1. Protection against regressions. 防止倒退
2. Resistance to refactoring. 对重构的抵制
3. Fast feedback 快速响应
4. Maintainability 可维护性

#### 4.1.1 第一支柱： 防止倒退

A regression is a softare bug.

就是当一个功能在经过一些代码修改后停止工作，通常是在你推出新功能后。

